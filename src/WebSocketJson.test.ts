import { describe, it } from 'node:test'
import { WebSocketJson } from './WebSocketJson.js'

describe('SymbolZeroMqのテスト', () => {
  it('ノーマルブロック', () => {
    const wsJson = new WebSocketJson()
    const buf = Buffer.from(
      '780100000000000069a006033c7d65d167003df55ea8ba2a1c7d31013016e025a5204b544fb84b8baaba7814f4d09d53c6a4b0a7bc53f15fd585a62a990f034b206d0307136a460f87eee5e3d69baa60c093fc2080ba5d36e623c5c0bcdc529b8712a9b6212420d7000000000198438170c0040000000000428c0ece0200000000a0724e18090000f188a4fa5d1cab071c19c9450284743880c22efb28a28d190e6a680aef2421dcca69a777d446a1ebc14677fba78d8d0343e2ba85f97c5c32c0511b8f6387cc41b03a457dc9d585bf39f2fb74b73d42098a8c87c4af584b885e25b050cf959487065ba68a3aa12ce2539557296a0d33eb000000000000000000000000000000000000000000000000000000000000000071f2004b074336b02ac4c84c3b57dc4c7a37f1fb1f3793aee4a64a55835c2f5588bae55c39b7a6196042a74aa4a5baa2570f00f5bc95c127ef22972016dd03c998be9ac4cd3e833736762a12a63065ff42e476744e6fc5970000000000000000',
      'hex'
    )
    wsJson.block(buf)
  })

  it('インポータンスブロック', () => {
    const wsJson = new WebSocketJson()
    const buf = Buffer.from(
      'a801000000000000b48264fee82a9676fe1722f1d1a0088f62895868de1f359ee7b7d88ddfc9f8405c89e6de0500b59411b31f441ee874a3ddc28a5caee52420718806c842e29d01104ccea2a65ea60f84a45704084ef93bad423932085000a13b4e9279788933ff000000000198438298bd040000000000e728a2cc0200000000a0724e18090000e3809cd2b44406c5d2227589fde9ee6aecaa7392cd167729a31d61aeececd0c17b2efa56d84dbb6a92600a346574a4736a5c4abfd468669b36a8917de71abae968a7d10dd48224a417ccbd6f6c713c0137f7293e22c32e10d0cc32eaa411f7a81289ac65dfba5270f934edf620df94f400000000000000000000000000000000000000000000000000000000000000000f2332b8351b6c51b350c8f14d05c77d0d6b26d72d13b595772f5913a6a80d6c8426814d3a232ea9b23f440be94548722c521deffc3de853619c3e2488ca1dba98a4b6731c0bc7e2778b0a0f1878f8edf24e933eeef6d153000000000b000000f900000000000000c58c17d3bba300002da30795bb9f6cdcb3d2f10d345fd36d75c9db1eca16fed39cc6b2f530e33165',
      'hex'
    )
    wsJson.block(buf)
  })

  it('トランスファートランザクション', () => {
    const wsJson = new WebSocketJson()
    const buf = Buffer.from(
      'b00000000000000024a07d7cb211172a5ccc07166375927ec31d9ef0cdb6242e539aa450ca659e2f9d07e5668cb077e079b57509770c80a16cabc7e70b9f08ee60eb8cc4444f440681ea7c15e7ec06261c9f654f54eac4748cfcf00e09a8fe47779acd14a7602004000000000198544100c2eb0b00000000d76f17e60200000098f2b99a0678f930fcd821fd36e3158615d9365fd927a5280000010000000000ce8ba0672e21c072c0ebb80e00000000',
      'hex'
    )
    wsJson.transaction(buf)
  })

  it('アグリゲートボンデッド', () => {
    const wsJson = new WebSocketJson()
    const buf = Buffer.from(
      '700100000000000037e9b8439ba808c9fded1f73a6377074ac4e124c961b5ebc5ff2c0595eceb5da17655b70a417cefd8e8a00ec92cc5be32b535281db4d2d081dabd287c5377f0969a31a837eb7de323f08ca52495a57ba0a95b52d1bb54cea9a94c12a87b1cadb000000000298414210bc000000000000e71f4cdf02000000abdf92cba2be809fc923abe952bdac327c2ed2dc8423b66b30b901f8b46585c36000000000000000600000000000000099687a9a5c5da3ec97d0568781fe5ab5c4bb9d18f4ba9343ae5bbd1d2c0ca7880000000001985441982b2aa2295b5c23528addee7f29f6521944e9f2340428ab00000100000000008ccb3fe998724b0101000000000000000000000000000000662cedf69962b1e0f1bf0c43a510dfb12190128b90f7fe9ba48b1249e8e10dbef4a8b98d280ca8b2d3259d0680eaf08a51e7ee9dc9a7c6a9cd2753b3efcca69304d587825b97c44d45aaaeae71cf3646a892d65a7a31dd4778694230b10a1a0e',
      'hex'
    )
    wsJson.transaction(buf)
  })
})
